<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FortiGate FMG VPN Configurator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            min-height: 100vh;
            overflow-x: hidden;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ba0000 0%, #030000 100%) fixed;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ba0000 0%, #390000 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
        }

        .form-section {
            padding: 30px;
            border-right: 1px solid #e0e0e0;
            max-height: 800px;
            overflow-y: auto;
        }

        .output-section {
            padding: 30px;
            background: #f8f9fa;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        label.required:after {
            content: ' *';
            color: #dc3545;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #ba0000;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
            font-family: monospace;
        }

        .vlan-builder {
            background: #f0f4ff;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .vlan-item {
            display: grid;
            grid-template-columns: 100px 1fr 60px;
            gap: 10px;
            margin-bottom: 10px;
        }

        .port-config {
            background: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 10px;
        }

        .port-item {
            display: grid;
            grid-template-columns: 80px 1fr 100px 100px 60px;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .checkbox-group label {
            margin: 0;
            font-weight: normal;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ba0000 0%, #390000 100%);
            color: white;
            width: 100%;
            margin-top: 20px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
            background: #ba0000;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .config-output {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            white-space: pre-wrap;
            max-height: 600px;
            overflow-y: auto;
            line-height: 1.6;
        }

        .actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .info-box {
            background: #e3f2fd;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid #2196f3;
            font-size: 13px;
        }

        h3 {
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ba0000;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        .notification.success {
            background: #28a745;
            color: white;
        }

        .notification.error {
            background: #dc3545;
            color: white;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .ip-interface-fields {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        @media (max-width: 968px) {
            .content {
                grid-template-columns: 1fr;
            }
            .form-section {
                border-right: none;
                border-bottom: 1px solid #e0e0e0;
            }
            .ip-interface-fields {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>FortiGate FMG VPN Configurator</h1>
            <p>4net - Jeyson Siew</p>
        </div>

        <div class="content">
            <div class="form-section">
                <h3>Kunden FortiGate</h3>
                
                <div class="form-group">
                    <label class="required">Kunden K√ºrzel</label>
                    <input type="text" id="customerID" placeholder="z.B. MAE">
                </div>
                
                <div class="form-group">
                    <label class="required">System Name</label>
                    <input type="text" id="systemName" placeholder="z.B. MAEFW01">
                </div>

                <div class="form-group">
                    <label class="required">WAN Interface</label>
                    <input type="text" id="wanInterface" placeholder="z.B. wan1">
                </div>
                
                <div class="form-group">
                    <label class="required">WAN IP</label>
                    <input type="text" id="wanIP" placeholder="z.B. 84.75.61.24">
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="ddns">
                    <label for="ddns">dDNS FQDN?</label>
                </div>

                <div class="form-group">
                    <label class="required">PSK Secret</label>
                    <input type="text" id="pskSecret" placeholder="z.B. abc1234abc1234">
                </div>

                <div class="form-group">
                    <label class="required">LO IP</label>
                    <input type="text" id="loIP" placeholder="z.B. 10.218.218.80">
                </div>

                <h3 style="margin-top: 30px;">FMG</h3>

                <div class="form-group">
                    <label class="required">FMG IP</label>
                    <input type="text" id="fmgIP" placeholder="z.B. 51.85.42.11">
                </div>

                <button class="btn btn-primary" type="button" id="generateBtn">
                    ‚öôÔ∏è Konfiguration generieren
                </button>
            </div>

            <div class="output-section">
                <h3>Generierte Konfiguration</h3>
                <div class="config-output" id="configOutput">! F√ºlle das Formular aus und klicke auf "Konfiguration generieren"</div>

                <div class="actions">
                    <button class="btn btn-primary" type="button" id="downloadBtn">
                        üíæ Download
                    </button>
                    <button class="btn btn-small" type="button" id="copyBtn">
                        üìã Kopieren
                    </button>
                </div>
            </div>
        </div>
    </div>

<script>
(function() {
    var currentConfig = '';

    function toggleNtp() {
        var checkbox = document.getElementById('ddns');
        var section = document.getElementById('ddns');
        section.style.display = checkbox.checked ? 'block' : 'none';
    }


    function generateConfig() {
        var customerID = document.getElementById('customerID').value;
        var systemName = document.getElementById('systemName').value;
        var wanInterface = document.getElementById('wanInterface').value;
        var pskSecret = document.getElementById('pskSecret').value;
        var loIP = document.getElementById('loIP').value;
        var fmgIP = document.getElementById('fmgIP').value;
        var wanIP = document.getElementById('wanIP').value;
        

        var enableNtp = document.getElementById('enableNtp').checked;
        var ntpServer = document.getElementById('ntpServer').value;
        


        if (!systemName || !wanInterface || !pskSecret || !customerID || !loIP || !fmgIP || !wanIP) {
            showNotification('Bitte f√ºlle alle Pflichtfelder aus!', 'error');
            return;
        }


        });

        var txt = '';
        txt += '		config vpn ipsec phase1-interface                 \n';
        txt += '    edit "VPN_4N-FGM-NS"                                  \n';
        txt += '        set interface "wan1"                              \n';
        txt += '        set ike-version 2                                 \n';
        txt += '        set peertype any                                  \n';
        txt += '        set net-device disable                            \n';
        txt += '        set proposal chacha20poly1305-prfsha512           \n';
        txt += '        set comments "FMG_4N_Serv"                        \n';
        txt += '        set dhgrp 27                                      \n';
        txt += '        set nattraversal disable                          \n';
        txt += '        set remote-gw 156.67.38.151                       \n';
        txt += '        set psksecret 23qlf8asdlq1kvn                     \n';
        txt += '    next                                                  \n';
        txt += 'end                                                       \n';
        txt += 'config vpn ipsec phase2-interface                         \n';
        txt += '    edit "VPN_4N-FGM-NS"                                  \n';
        txt += '        set phase1name "VPN_4N-FGM-NS"                    \n';
        txt += '        set proposal chacha20poly1305                     \n';
        txt += '        set dhgrp 27                                      \n';
        txt += '        set auto-negotiate enable                         \n';
        txt += '    next                                                  \n';
        txt += 'end                                                       \n';
        txt += '                                                          \n';
        txt += '                                                          \n';
        txt += 'config firewall service custom                            \n';
        txt += '    edit "CS_TCP541"                                      \n';
        txt += '        set category Network\ Services                    \n';
        txt += '        set tcp-portrange 541                             \n';
        txt += '    next                                                  \n';
        txt += 'end                                                       \n';
        txt += '                                                          \n';
        txt += 'config system interface                                   \n';
        txt += '    edit "4NET_FMGServ"                                   \n';
        txt += '        set vdom "root"                                   \n';
        txt += '        set ip 10.218.218.78 255.255.255.255              \n';
        txt += '        set allowaccess fgfm                              \n';
        txt += '        set type loopback                                 \n';
        txt += '        set role lan                                      \n';
        txt += '    next                                                  \n';
        txt += 'end                                                       \n';
        txt += '                                                          \n';
        txt += 'config firewall address                                   \n';
        txt += '    edit "H_S4NSFMG01"                                    \n';
        txt += '        set color 23                                      \n';
        txt += '        set subnet 10.4.105.18 255.255.255.255            \n';
        txt += '    next                                                  \n';
        txt += 'end                                                       \n';
        txt += '                                                          \n';
        txt += 'config firewall address                                   \n';
        txt += '    edit "N_4NS_LoopBack_FMG"                             \n';
        txt += '        set color 23                                      \n';
        txt += '        set subnet 10.218.218.77 255.255.255.255          \n';
        txt += '    next                                                  \n';
        txt += 'end                                                       \n';
        txt += '                                                          \n';
        txt += '                                                          \n';
        txt += 'config firewall policy                                    \n';
        txt += '    edit 0                                                \n';
        txt += '        set name "H_LoopBack_FMGServ - 4NET_FMG_NS"       \n';
        txt += '        set srcintf "VPN_4N-FGM-NS"                       \n';
        txt += '        set dstintf "4NET_FMGServ"                        \n';
        txt += '        set action accept                                 \n';
        txt += '        set srcaddr "H_S4NSFMG01"                         \n';
        txt += '        set dstaddr "N_4NS_LoopBack_FMG"                  \n';
        txt += '        set schedule "always"                             \n';
        txt += '        set service "CS_TCP541"                           \n';
        txt += '        set anti-replay disable                           \n';
        txt += '        set logtraffic all                                \n';
        txt += '    next                                                  \n';
        txt += 'end                                                       \n';
        txt += '                                                          \n';
        txt += '                                                          \n';
        txt += 'config router static                                      \n';
        txt += '    edit 0                                                \n';
        txt += '        set dst 10.4.105.16 255.255.255.248               \n';
        txt += '        set device "VPN_4N-FGM-NS"                        \n';
        txt += '    next                                                  \n';
        txt += 'end                                                       \n';
        txt += '                                                          \n';
        txt += 'config system central-management                          \n';
        txt += '    set mode backup                                       \n';
        txt += '    set type fortimanager                                 \n';
        txt += '    set fmg "10.4.105.18"                                 \n';
        txt += 'end                                                       \n';


    
            txt += 'config vpn ipsec phase1-interface                        \n';
        txt += '    edit "FMG-FGTWIT01"                                  \n';
        txt += '        set interface "I-4S-Pu-WAN1"                     \n';
        txt += '        set ike-version 2                                \n';
        txt += '        set peertype any                                 \n';
        txt += '        set net-device disable                           \n';
        txt += '        set proposal chacha20poly1305-prfsha512          \n';
        txt += '        set comments "Manager-Service Customer WITG"     \n';
        txt += '        set dhgrp 27                                     \n';
        txt += '        set nattraversal disable                         \n';
        txt += '        set remote-gw witg.internet-box.ch               \n';
        txt += '        set psksecret 23qlf8asdlq1kvn                    \n';
        txt += '    next                                                 \n';
        txt += 'end                                                      \n';
        txt += 'config vpn ipsec phase2-interface                        \n';
        txt += '    edit "FMG-FGTWIT01"                                  \n';
        txt += '        set phase1name "FMG-FGTWIT01"                    \n';
        txt += '        set proposal chacha20poly1305                    \n';
        txt += '        set dhgrp 27                                     \n';
        txt += '        set auto-negotiate enable                        \n';
        txt += '    next                                                 \n';
        txt += 'end                                                      \n';
        txt += '                                                         \n';
        txt += '                                                         \n';
        txt += 'config firewall address                                  \n';
        txt += '    edit "H_FGTWIT01"                                    \n';
        txt += '        set subnet 10.218.218.78 255.255.255.255         \n';
        txt += '    next                                                 \n';
        txt += 'end                                                      \n';
        txt += '                                                         \n';
        txt += '                                                         \n';
        txt += 'config router static                                     \n';
        txt += '    edit 0                                               \n';
        txt += '        set dst 10.218.218.78 255.255.255.255            \n';
        txt += '        set device "FMG-FGTWIT01"                        \n';
        txt += '    next                                                 \n';
        txt += 'end                                                      \n';
        txt += '                                                         \n';
        txt += '                                                         \n';
        txt += 'config firewall addrgrp                                  \n';
        txt += '    edit "G_FMS-Firewalls"                               \n';
        txt += '	append member "H_FGTWIT01"                           \n';
        txt += '    next                                                 \n';
        txt += 'end                                                      \n';
        txt += '                                                         \n';
        txt += '                                                         \n';
        txt += 'config system zone                                       \n';
        txt += '    edit "Z_VPN-4NS-FMG"                                 \n';
        txt += '    append member "FMG-FGTWIT01"                         \n';
        txt += '	next                                                 \n';
        txt += 'end                                                      \n';
    
    

        document.getElementById('configOutput').textContent = txt;
        currentConfig = txt;
        showNotification('Konfiguration erfolgreich generiert!');
    }

    function downloadConfig() {
        if (!currentConfig) {
            showNotification('Bitte erst eine Konfiguration generieren!', 'error');
            return;
        }
        
        var systemName = document.getElementById('systemName').value;
        var timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);
        var filename = systemName + '_config_' + timestamp + '.txt';
        
        var blob = new Blob([currentConfig], { type: 'text/plain' });
        var url = URL.createObjectURL(blob);
        var a = document.createElement('a');
        a.href = url;
        a.download = filename;
        a.click();
        URL.revokeObjectURL(url);
        
        showNotification('Download gestartet!');
    }

    function copyConfig() {
        if (!currentConfig) {
            showNotification('Bitte erst eine Konfiguration generieren!', 'error');
            return;
        }
        
        navigator.clipboard.writeText(currentConfig).then(function() {
            showNotification('In Zwischenablage kopiert!');
        });
    }

    document.getElementById('enableNtp').addEventListener('change', toggleNtp);
        });
    });

    updateSwitchDefaults();
})();
</script>
</body>
</html>
